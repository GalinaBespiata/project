{"mappings":"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","sources":["src/js/popular.js","src/js/search.js","src/js/pagination.js"],"sourcesContent":["import axios from 'axios';\nimport { pagination } from './pagination.js';\nexport const cardsList = document.querySelector('.cards__list');\nlet TOTAL_PAGES = 0;\nlet page = 1;\n\nif (window.location.pathname !== \"/library.html\") {\n  loadPopular();\n}\n\nlet GENRES = [];\n\nexport async function getPopular(page = 1) {\n  const { data } = await axios.get(\n    `https://api.themoviedb.org/3/trending/movie/week?api_key=004aa31770cc2729c6dd319813b8b5dc&page=${page}`\n  );\n  \n  return data;\n}\n\nexport function renderMarkup(movies) {\n  cardsList.innerHTML = '';\n  const markup = movies\n    .map(movie => {\n      return `<li class=\"cards__item\" data-id=\"${movie.id}\">\n\n     \n          <img\n            class=\"cards__photo\"\n            alt=\"movie\"\n            src=\"https://image.tmdb.org/t/p/w500${movie.poster_path}\"\n            width=\"450\"\n            loading=\"lazy\"\n          />\n          <h3 class=\"cards__title\">${movie.title}</h3>\n          <p class=\"cards__info\">${getGenresName(GENRES, movie.genre_ids).join(\n            ', '\n          )} | ${movie.release_date.split('-')[0]}</p>\n        </li>`;\n    })\n    .join('');\n  cardsList.insertAdjacentHTML('beforeend', markup);\n}\n\nasync function loadPopular() {\n  try {\n    const { results, page, total_pages } = await getPopular();\n    GENRES = await getGenres();\n    renderMarkup(results);\n    pagination(1, total_pages);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport async function getGenres() {\n  const { data } = await axios.get(\n    'https://api.themoviedb.org/3/genre/movie/list?api_key=004aa31770cc2729c6dd319813b8b5dc'\n  );\n  return data.genres;\n}\n\nexport function getGenresName(allGenres, genreIds) {\n  const genresName = allGenres.reduce((acc, genre) => {\n    if (genreIds.includes(genre.id)) {\n      return [...acc, genre.name];\n    }\n    return acc;\n  }, []);\n  return genresName.length > 2 ? genresName.slice(0, 2) : genresName;\n}\n","import axios from 'axios';\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport { Loading } from 'notiflix/build/notiflix-loading-aio';\nimport { renderMarkup } from './popular';\nimport { pagination } from './pagination.js';\nconst searchForm = document.querySelector('.form');\nconst searchInput = document.querySelector('#search');\nconst notification = document.querySelector('.notification');\nexport let searched = '';\nsearchInput.addEventListener('keyup', event => {\n  notification.classList.add('close');\n});\n\nsearchForm.addEventListener('submit', searchFilm);\n\nasync function searchFilm(event) {\n  event.preventDefault();\n  Loading.standard();\n  Loading.remove(800);\n  const {\n    elements: { search },\n  } = event.currentTarget;\n  searched = search.value;\n  \n  if (search.value.length < 2) {\n    Notify.warning('Its name too short.Enter the correct movie name, please.');\n    event.currentTarget.reset();\n    return;\n  }\n  try {\n    const { results, page, total_pages } = await getByName(searched.trim(), 1);\n   \n    const cardsList = document.querySelector('.cards__list');\n    // if (cardsList) {\n    //   cardsList.innerHTML = '';\n    // }\n    if (Array.isArray(results) && results.length) {\n      renderMarkup(results);\n      pagination(1, total_pages);\n    } else {\n      notification.classList.remove('close');\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport async function getByName(name, page) {\n  const { data } = await axios.get(\n    `https://api.themoviedb.org/3/search/movie?api_key=004aa31770cc2729c6dd319813b8b5dc&query=${name}&page=${page}`\n  );\n  \n\n  return data;\n}\n","import { getPopular } from './popular.js';\nimport { getByName } from './search';\nimport { searched } from './search';\nimport { renderMarkup } from './popular.js';\nconst paginationBox = document.querySelector('.pagination-container');\nlet globalCurrentpage = 0;\n\nexport function pagination(currentPage, allPages) {\n  let markup = '';\n  let beforeTwoPage = currentPage - 2;\n  let beforePage = currentPage - 1;\n  let afterPage = currentPage + 1;\n  let afterTwoPage = currentPage + 2;\n  globalCurrentpage = currentPage;\n  if (currentPage > 1) {\n    markup += `<li class=\"pagination__item arrow-left\" >&#129144;</li>`;\n    markup += `<li class=\"pagination__item\">1</li>`;\n  }\n  if (window.innerWidth >= 768) {\n    if (currentPage > 4) {\n      markup += `<li  class=\"pagination__item dotsLeft\">...</span>`;\n    }\n    if (currentPage > 3) {\n      markup += `<li  class=\"pagination__item\">${beforeTwoPage}</li>`;\n    }\n    if (currentPage > 2) {\n      markup += `<li  class=\"pagination__item\">${beforePage}</li>`;\n    }\n    markup += `<li class=\"pagination__item pagination__item--active\">${currentPage}</li>`;\n    if (allPages - 1 > currentPage) {\n      markup += `<li  class=\"pagination__item\">${afterPage}</li>`;\n    }\n    if (allPages - 2 > currentPage) {\n      markup += `<li class=\"pagination__item\">${afterTwoPage}</li>`;\n    }\n    if (allPages - 3 > currentPage) {\n      markup += `<li  class=\"pagination__item dotsRight\">...</li>`;\n    }\n    if (allPages > currentPage) {\n      markup += `<li  class=\"pagination__item\">${allPages}</li>`;\n      markup += `<li  class=\"pagination__item arrow-right\">&#129146;</li>`;\n    }\n  } else {\n    if (currentPage > 3) {\n      markup += `<li  class=\"pagination__item\">${beforeTwoPage}</li>`;\n    }\n    if (currentPage > 2) {\n      markup += `<li  class=\"pagination__item\">${beforePage}</li>`;\n    }\n    markup += `<li class=\"pagination__item pagination__item--active\">${currentPage}</li>`;\n    if (allPages - 1 > currentPage) {\n      markup += `<li  class=\"pagination__item\">${afterPage}</li>`;\n    }\n    if (allPages - 2 > currentPage) {\n      markup += `<li class=\"pagination__item\">${afterTwoPage}</li>`;\n    }\n    if (allPages > currentPage) {\n      markup += `<li  class=\"pagination__item\">${allPages}</li>`;\n      markup += `<li  class=\"pagination__item arrow-right\">&#129146;</li>`;\n    }\n  }\n  paginationBox.innerHTML = markup;\n}\npaginationBox.addEventListener('click', handlerPagination);\nfunction handlerPagination(evt) {\n \n  if (!searched) {\n    if (evt.target.nodeName !== 'LI') {\n      return;\n    }\n    if (evt.target.textContent === '...') {\n      return;\n    }\n    if (evt.target.textContent === '🡸') {\n      getPopular((globalCurrentpage -= 1)).then(\n        ({ results, page, total_pages }) => {\n          renderMarkup(results);\n          pagination(page, total_pages);\n        }\n      );\n      return;\n    }\n    if (evt.target.textContent === '🡺') {\n      getPopular((globalCurrentpage += 1)).then(\n        ({ results, page, total_pages }) => {\n          renderMarkup(results);\n          pagination(page, total_pages);\n        }\n      );\n      return;\n    }\n    //\n    const page = evt.target.textContent;\n   \n    getPopular(page).then(({ results, page, total_pages }) => {\n      renderMarkup(results);\n      pagination(page, total_pages);\n    });\n  } else {\n    if (evt.target.nodeName !== 'LI') {\n      return;\n    }\n    if (evt.target.textContent === '...') {\n      return;\n    }\n    if (evt.target.textContent === '🡸') {\n      getByName(searched, (globalCurrentpage -= 1)).then(\n        ({ results, page, total_pages }) => {\n          renderMarkup(results);\n          pagination(page, total_pages);\n        }\n      );\n      return;\n    }\n    if (evt.target.textContent === '🡺') {\n      \n      getByName(searched, (globalCurrentpage += 1)).then(\n        ({ results, page, total_pages }) => {\n          renderMarkup(results);\n          pagination(page, total_pages);\n        }\n      );\n      return;\n    }\n\n    const page = evt.target.textContent;\n    \n    getByName(searched, page).then(({ results, page, total_pages }) => {\n      renderMarkup(results);\n      pagination(page, total_pages);\n    });\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$d35904b1c7f1c41e$var$searchForm","document","querySelector","$d35904b1c7f1c41e$var$searchInput","$d35904b1c7f1c41e$var$notification","$d35904b1c7f1c41e$export$72471ff1c507d2f6","$d35904b1c7f1c41e$var$_searchFilm","$parcel$interopDefault","$2TvXO","mark","_callee","event","_currentTarget","search","ref","results","total_pages","preventDefault","$7rQOT","Loading","standard","remove","currentTarget","elements","value","length","$h6c0i","Notify","warning","reset","$d35904b1c7f1c41e$export$6fc04a76f170c279","trim","_ctx","sent","page","Array","isArray","$94a21fe277797eb7$export$add40575555c273c","$dfaf77c789ce7a24$export$22fa394f3ba39578","classList","console","log","t0","apply","this","arguments","name","$d35904b1c7f1c41e$var$_getByName","data","$dIxxU","default","get","concat","addEventListener","add","$dfaf77c789ce7a24$var$paginationBox","$dfaf77c789ce7a24$var$globalCurrentpage","currentPage","allPages","markup","beforeTwoPage","beforePage","afterPage","afterTwoPage","window","innerWidth","innerHTML","evt","target","nodeName","textContent","then","param","page1","$94a21fe277797eb7$export$4c00e43813fefca2","$94a21fe277797eb7$export$2e423f4a20fb9b24","location","pathname","$94a21fe277797eb7$var$_loadPopular","$94a21fe277797eb7$var$loadPopular","$94a21fe277797eb7$var$GENRES","$94a21fe277797eb7$var$_getPopular","_args","movies","map","movie","id","poster_path","title","allGenres","genreIds","genre_ids","genresName","reduce","acc","genre","includes","$8nrFW","slice","join","release_date","split","insertAdjacentHTML","$94a21fe277797eb7$export$c5604fa8028da00","$94a21fe277797eb7$var$_getGenres","genres"],"version":3,"file":"index.730a18e5.js.map"}